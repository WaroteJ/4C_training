<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="assets/style.css">
    <title>To do list</title>
</head>
<body>
    <div class="header">
        <h2>To do list</h2>
        <input type="text" id="newValue" placeholder="Ecrire ici...">
        <span onclick="addElement()" class="add">Ajouter</span>
    </div>

    <ul id="myList">
        <li>Première chose</li>
    </ul>

    <script>
        // Add a new <li> element
        function addElement(){ 
            let li = document.createElement("LI"); 
            let input=document.getElementById("newValue").value; //Get the input value
            if (input!==''){
                let value=document.createTextNode(input);  // Create the text node
                li.appendChild(value);                      // Append the text to our new <li> element
                document.getElementById("myList").appendChild(li); // append the <li> to the our <ul> which has the "myList" ID
            }
            else alert("L'élement est vide");
            document.getElementById("newValue").value=""; //Empty the input field

            let span = document.createElement("SPAN"); //We create a <span> next to the <li>
            let x = document.createTextNode("\u2191"); // This a the kind of X character
            span.className="arrowUp arrows";                    // add the class "close" to the <span>
            span.appendChild(x);                        
            li.appendChild(span);    
            
            span = document.createElement("SPAN"); //We create a <span> next to the <li>
            x = document.createTextNode("\u2193"); // This a the kind of X character
            span.className="arrowDown arrows";                    // add the class "close" to the <span>
            span.appendChild(x);                        
            li.appendChild(span);   

            span = document.createElement("SPAN"); //We create a <span> next to the <li>
            x = document.createTextNode("\u00D7"); // This a the kind of X character
            span.className="close";                    // add the class "close" to the <span>
            span.appendChild(x);                        
            li.appendChild(span);  
        }

        // All the onclick events on the list elements
        let list = document.querySelector("ul");  // get the <ul>
        list.addEventListener("click",function(event){ // Listen to an onclick event in the ul     
            if (event.target.tagName=== "LI"){         // Check if the clicked area is a <li> 
                event.target.classList.toggle("checked"); // Toggle the class checked
            }
            switch (event.target.className) {
                case "close": // Check if the clicked area class is "close"
                    event.target.parentNode.remove(); // Remove the associated <li>
                    break;
                case "arrowUp arrows":
                    if(!!event.target.parentNode.previousSibling){
                        let tempClass=event.target.parentNode.previousSibling.className;
                        let temp=event.target.parentNode.previousSibling.innerHTML;
                        event.target.parentNode.previousSibling.className=event.target.parentNode.className;
                        event.target.parentNode.previousSibling.innerHTML=event.target.parentNode.innerHTML;
                        event.target.parentNode.className=tempClass; 
                        event.target.parentNode.innerHTML=temp;
                    }
                    break;
                case "arrowDown arrows":
                       
                    break;                        
                default:
                    break;
            }
        })

        //Add the close button to every <li> element
        let liElements = document.getElementsByTagName("LI"); // Get all <li> element

        for (let i = 0; i < liElements.length; i++) {
            let span = document.createElement("SPAN"); //We create a <span> next to the <li>
            let x = document.createTextNode("\u2191"); // This a the kind of X character
            span.className="arrowUp arrows";                    // add the class "close" to the <span>
            span.appendChild(x);                        
            liElements[i].appendChild(span);    
            
            span = document.createElement("SPAN"); //We create a <span> next to the <li>
            x = document.createTextNode("\u2193"); // This a the kind of X character
            span.className="arrowDown arrows";                    // add the class "close" to the <span>
            span.appendChild(x);                        
            liElements[i].appendChild(span);        
        };

        for (let i = 0; i < liElements.length; i++) {
            let span = document.createElement("SPAN"); //We create a <span> next to the <li>
            let x = document.createTextNode("\u00D7"); // This a the kind of X character
            span.className="close";                    // add the class "close" to the <span>
            span.appendChild(x);                        
            liElements[i].appendChild(span);        
        }; 
    </script>  

</body>
</html>