<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="assets/style.css">
    <title>To do list</title>
</head>
<body>
    <div class="header">
        <h2>To do list</h2>
        <input type="text" id="newValue" placeholder="Ecrire ici...">
        <span onclick="addElement()" class="add">Ajouter</span>
    </div>

    <ul id="myList">
        <li>Première chose</li>
    </ul>

    <script>
        // Add a new <li> element
        function addElement(){ 
            let li = document.createElement("LI"); 
            let input=document.getElementById("newValue").value; //Get the input value
            if (input!==''){
                let value=document.createTextNode(input);  // Create the text node
                li.appendChild(value);                      // Append the text to our new <li> element
                document.getElementById("myList").appendChild(li); // append the <li> to the our <ul> which has the "myList" ID
            }
            else alert("L'élement est vide");
            document.getElementById("newValue").value=""; //Empty the input field

            let span = document.createElement("SPAN"); //We create a <span> next to the <li>
            let x = document.createTextNode("\u00D7"); // This a the kind of X character
            span.className="close";                    // add the class "close" to the <span>
            span.appendChild(x);                        
            li.appendChild(span);  
        }

        // Check- Uncheck an element
        let list = document.querySelector("ul");  // get the <ul>
        list.addEventListener("click",function(event){ // Listen to a mouse click event in the ul
            if (event.target.tagName=== "LI"){         // Check if the clicked area is a <li> 
                event.target.classList.toggle("checked"); // Toggle the class checked
            }
            if (event.target.tagName==="SPAN"){         // Check if the clicked area is a <span>
                event.target.parentNode.remove();       // Remove the associated <li>
            }
        })

        //Add the close button to every <li> element
        let liElements = document.getElementsByTagName("LI"); // Get all <li> element
        for (let index = 0; index < liElements.length; index++) {
            let span = document.createElement("SPAN"); //We create a <span> next to the <li>
            let x = document.createTextNode("\u00D7"); // This a the kind of X character
            span.className="close";                    // add the class "close" to the <span>
            span.appendChild(x);                        
            liElements[index].appendChild(span);        
        };
    </script>  

</body>
</html>